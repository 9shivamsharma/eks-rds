version: 0.2

phases:
  build:
    commands:
      - echo "ğŸ” Listing BuildArtifact contents:"
      - ls -la BuildArtifact || echo "BuildArtifact not found"
      - echo "ğŸ” Listing bk_artifact contents:"
      - ls -la bk_artifact || echo "bk_artifact not found"
      
      - echo "ğŸ“ Creating manifests directory..."
      - mkdir -p manifests
      
      - echo "ğŸ“‹ Copying frontend manifests..."
      - cp BuildArtifact/frontend-deployment.yaml manifests/ || echo "âŒ frontend-deployment.yaml not found in BuildArtifact"
      - cp BuildArtifact/frontend-service.yaml manifests/ || echo "âŒ frontend-service.yaml not found in BuildArtifact"
      
      - echo "ğŸ“‹ Copying backend manifests..."
      - cp bk_artifact/backend-deployment.yaml manifests/ || echo "âŒ backend-deployment.yaml not found in bk_artifact"
      - cp bk_artifact/backend-service.yaml manifests/ || echo "âŒ backend-service.yaml not found in bk_artifact"
      
      - echo "âœ… Final manifests directory contents:"
      - ls -la manifests/

artifacts:
  files:
    - manifests/* 